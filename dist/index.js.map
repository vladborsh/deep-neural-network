{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/index.ts","webpack:///./src/net.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import { Net } from \"./net\";\n\nconst network: Net = new Net(10, 3, 4, 5);\n\nnetwork.learn(\n\t[\n\t\t[ 1, 1, 0, 1, 1, 0, 0, 0, 1, 1 ],\n\t\t[ 0, 0, 1, 1, 0, 0, 0, 0, 1, 0 ],\n\t\t[ 0, 0, 0, 1, 0, 1, 1, 1, 0, 0 ],\n\t], \n\t[\n\t\t[ 0, 0, 1, 0, 1 ],\n\t\t[ 1, 0, 0, 1, 0 ],\n\t\t[ 0, 1, 0, 0, 0 ],\n\t],\n\t0.05\n);","interface NetOutputs {\n    activations: number[][][],\n    outputs: number[][][],\n}\n\ninterface WeighsDelta {\n    previousDelta: number[][];\n    dW: number[][][]\n}\n\nexport class Net {\n\tprivate net: number[][][];\n\n\tconstructor(inputLayer: number, ...layers: number[]) {\n\t\tthis.net = Net.initNet(inputLayer, layers)\n    }\n\n    public static printLayer(layer: number[][]) {\n        layer.forEach(\n            (neuron: number[]) => console.log(\n                `[${neuron.reduce((result: string, w: number) => result.concat(`${w},`),'',)}]`\n            )\n        );\n    }\n\n\tpublic exportNet(): number[][][] {\n\t\treturn this.net;\n    }\n\n    public printNet(): void {\n        this.net.forEach(Net.printLayer);\n    }\n\n    public learn(inputs: number[][], outputs: number[][], learningRate: number) {\n        const ALLOWED_ERROR = 0.01;\n        let error = 9999;\n        let step = 0;\n\n        while (error > ALLOWED_ERROR || step < 10000) {\n            error = 0;\n            \n            inputs.forEach((input: number[], i: number) => {\n                const { dW, lost } = this.learnStep(input, outputs[i]);\n                this.updateNet(dW, learningRate);\n                error += lost;\n            });\n            \n            error /= inputs.length;\n            step++;\n        }\n    }\n\n    public learnStep(input: number[], output: number[]): { dW: number[][][], lost: number } {\n        const netOutputs = this.forwardPropagate(input);\n\n        return {\n            lost: Net.totalLost(netOutputs.activations[netOutputs.activations.length-1][0], output),\n            dW: this.backPropagate(netOutputs, output),\n        };\n    }\n\n\tpublic forwardPropagate(input: number[]): NetOutputs {\n\t\treturn this.net.reduce(\n            ({outputs, activations}: NetOutputs, currentLayer: number[][], i: number, net: number[][][]) => {\n                const dot: number[][] = Net.dot(activations[i], currentLayer);\n\n                return {\n                    outputs:  [ ...outputs, dot ],\n                    activations: [\n                        ...activations,\n                        Net.applyFunction(\n                            dot,\n                            (i < net.length-1 ? Net.relu : Net.sigmoid)\n                        ),\n                    ],\n                };\n            },\n\t\t\t{ outputs: [], activations: [[input]] },\n\t\t);\n    }\n\n    public backPropagate({outputs, activations}: NetOutputs, expectedOutputs: number[]): number[][][] {\n        const dW: number[][][] = new Array(this.net.length);\n\n        let delta = Net.product(\n            [ Net.calculateCost(activations[activations.length-1][0], expectedOutputs) ],\n            Net.applyFunction(outputs[outputs.length-1], Net.sigmoid_),\n        );\n\n        dW[this.net.length-1] = Net.dot(Net.transpose(activations[activations.length-2]), delta)\n\n        for (let i = this.net.length-2; i > -1; i--) {\n            delta = Net.product(\n                Net.transpose(Net.dot(this.net[i+1], Net.transpose(delta))),\n                Net.applyFunction(outputs[i], Net.relu_),\n            );\n            \n            dW[i] = Net.dot(Net.transpose(activations[i]), delta)\n        }\n\n        return dW;\n    }\n\n    public updateNet(dW: number[][][], learningRate: number): void {\n        dW.forEach((layer: number[][], i: number) =>\n            layer.forEach((neuron: number[], j: number) =>\n                neuron.forEach((w: number, k: number) =>\n                    this.net[i][j][k] += learningRate * w\n                ),\n            ),\n        );\n    }\n\n\tprivate static initNet(inputLayer: number, layers: number[]): number[][][] {\n        const result: number[][][] = new Array(layers.length);\n\n\t\tlayers.forEach((layer, i) => \n\t\t\tresult[i] = i === 0 ? Net.initLayer(inputLayer, layer) : Net.initLayer(layers[i-1], layer),\n\t\t);\n\n\t\treturn result;\n\t}\n\n\tprivate static initLayer(inputLayer: number, neurons: number): number[][] {\n\t\treturn Net.initMatrix(neurons, inputLayer);\n\t}\n\n\tprivate static initMatrix(width: number, height: number): number[][] {\n        const result: number[][] = new Array(height);\n\n\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\tresult[i] = new Array(width);\n\t\t\tfor (let j = 0; j < result[i].length; j++) {\n\t\t\t\tresult[i][j] = (Math.random()-0.5);\n\t\t\t}\n\t\t}\n\t\n\t\treturn result;\n\t}\n\n\tprivate static dot(matrix1: number[][], matrix2: number[][]): number[][] {\n        const result: number[][] = new Array(matrix1.length);\n\n\t\tfor (let i = 0; i < matrix1.length; i++) {\n\t\t\tresult[i] = new Array(matrix2[0].length);\n\t\t\tfor (let j = 0; j < matrix2[0].length; j++) {\n\t\t\t\tresult[i][j] = 0;\n\t\t\t\tfor (let k = 0; k < matrix1[0].length; k++) {\n\t\t\t\t\tresult[i][j] += matrix1[i][k] * matrix2[k][j];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n    }\n\n    private static product(matrix1: number[][], matrix2: number[][]): number[][] {\n        if (matrix1.length != matrix2.length || matrix1[0].length != matrix2[0].length) {\n            console.error(`Matrixes has different size: [${matrix1.length}, ${matrix1[0].length}], [${matrix2.length}, ${matrix2[0].length}]`)\n        }\n\n        const result: number[][] = new Array(matrix1.length);\n    \n\t\tfor (let i = 0; i < matrix1.length; i++) {\n\t\t\tresult[i] = new Array(matrix1[0].length);\n\t\t\tfor (let j = 0; j < matrix1[i].length; j++) {\n\t\t\t\tresult[i][j] = matrix1[i][j] * matrix2[i][j];\n\t\t\t}\n\t\t}\n    \n\t\treturn result;\n    }\n\n    private static applyFunction(matrix: number[][], func: (x: number) => number): number[][] {\n        const result: number[][] = new Array(matrix.length);\n\n        for (let i = 0; i < result.length; i++) {\n            result[i] = new Array(matrix[i].length);\n\t\t\tfor (let j = 0; j < result[i].length; j++) {\n                result[i][j] = func(matrix[i][j]);\n            }\n        }\n\n        return result;\n    }\n\n    private static transpose(matrix: number[][]): number[][] {\n        return matrix[0].map((_, i: number) => matrix.map((row: number[]) => row[i]));\n    }\n    \n    private static relu(x: number): number {\n        return x > 0 ? x : 0;\n    }\n\n    private static relu_(x: number): number {\n        return x > 0 ? x : 0;\n    }\n\n    private static sigmoid(x: number): number {\n        return 1 / (1 + Math.exp(-x));\n    }\n\n    private static sigmoid_(x: number): number {\n        return Net.sigmoid(x) * (1 - Net.sigmoid(x));\n    }\n\n    private static mse(yExpected: number, y: number): number {\n        return Math.pow(yExpected - y, 2);\n    }\n\n    private static mse_(yExpected: number, y: number): number {\n        return -2 * (yExpected - y);\n    }\n\n    private static calculateCost(outputs: number[], expectedOutputs: number[]): number[] {\n        return outputs.map((y, i) => Net.mse_(expectedOutputs[i], y))\n    }\n\n    private static totalLost(outputs: number[], expectedOutputs: number[]): number {\n        return outputs.reduce(\n            (result, y, i) => result += Net.mse(expectedOutputs[i], y),\n            0\n        ) / outputs.length;\n    }\n\n}\n"],"sourceRoot":""}